<!-- Interaktive Fisch-Timeline -->
<div class="fish-timeline">
  <div class="timeline-container">
    {% assign fish_posts = site.posts | where_exp: "post", "post.categories contains 'fish'" | sort: 'fish_birth' %}
    {% for post in fish_posts %}
    <div class="timeline-item" data-fish="{{ post.title | slugify }}">
      <div class="timeline-marker">
        <a href="{{ post.url | relative_url }}" class="fish-link">
          {% if post.timeline_image %}
            <img src="{{ post.timeline_image | relative_url }}" alt="{{ post.title }}" class="fish-avatar">
          {% else %}
            <!-- Automatisch Timeline-Bild mit _timeline Suffix suchen -->
            {% assign fish_slug = post.title | slugify %}
            {% assign timeline_image_path = '/assets/images/fish/' | append: fish_slug | append: '/' | append: fish_slug | append: '_timeline.webp' %}
            <img src="{{ timeline_image_path | relative_url }}" alt="{{ post.title }}" class="fish-avatar" onerror="this.onerror=null; this.style.display='none'; this.nextElementSibling.style.display='flex';">
            <div class="fish-placeholder" style="display: none;">üêü</div>
          {% endif %}
        </a>
      </div>
      <a href="{{ post.url | relative_url }}" class="timeline-content-link">
        <div class="timeline-content">
          <div class="timeline-date">
            {% if post.fish_birth %}
              {% assign birth_date = post.fish_birth | date: "%Y-%m-%d" %}
              {% assign birth_year = birth_date | date: "%Y" %}
              {% assign birth_month = birth_date | date: "%m" %}
              {% case birth_month %}
                {% when "01" %}{% assign month_name = "Januar" %}
                {% when "02" %}{% assign month_name = "Februar" %}
                {% when "03" %}{% assign month_name = "M√§rz" %}
                {% when "04" %}{% assign month_name = "April" %}
                {% when "05" %}{% assign month_name = "Mai" %}
                {% when "06" %}{% assign month_name = "Juni" %}
                {% when "07" %}{% assign month_name = "Juli" %}
                {% when "08" %}{% assign month_name = "August" %}
                {% when "09" %}{% assign month_name = "September" %}
                {% when "10" %}{% assign month_name = "Oktober" %}
                {% when "11" %}{% assign month_name = "November" %}
                {% when "12" %}{% assign month_name = "Dezember" %}
              {% endcase %}
              {{ month_name }} {{ birth_year }}
            {% else %}
              {{ post.date | date: "%d.%m.%Y" }}
            {% endif %}
          </div>
          <h4>{{ post.title }}</h4>
          <p>{{ post.excerpt | strip_html | truncatewords: 15 }}</p>
          {% if post.fish_age %}
            <div class="fish-info">
              <span class="fish-age">Alter: {{ post.fish_age }}</span>
            </div>
          {% endif %}
          {% if post.fish_status %}
            <span class="fish-status status-{{ post.fish_status }}">{{ post.fish_status | capitalize }}</span>
          {% endif %}
        </div>
      </a>
    </div>
    {% endfor %}
  </div>
</div>
